<script setup>
import { ref, onMounted } from 'vue'
import { query, collection, onSnapshot, getFirestore, limit } from 'firebase/firestore'

const recentNotice = ref([])

onMounted(() => {
  getRecentNotice()
})

// const documentSnapshots = ref()
async function getRecentNotice () {
  const db = getFirestore()
  const q = query(collection(db, 'notices'), limit(8))
  // documentSnapshots.value = await getDocs(q)
  onSnapshot(q, (snapshot) => {
    recentNotice.value = []
    snapshot.forEach((doc) => {
      recentNotice.value.push({
        id: doc.id,
        ...doc.data()
      })
    })
  })
}
</script>

<template>
  <div class="container mx-auto px-[23rem] my-12">
    <div class="flex">
      <div class="w-1/3 h-64 bg-white border p-4">
        <div class="flex flex-col mt-1">
          <div class="font-bold text-lg text-[#1B426B]">
            공/지/사/항
          </div>
          <div class="bg-[#1B426B] w-full h-[0.1rem] mb-1" />
        </div>
        <div
          v-for="notice in recentNotice"
          :key="notice"
          class="flex flex-col"
        >
          <div class="flex">
            <div class="w-3/4 overflow-hidden">
              {{ notice.title }}
            </div>
            <div class="text-[0.65rem] font-bold text-gray-400 place-self-center">
              2022-01-10
            </div>
          </div>
        </div>
      </div>
      <div class="w-1/3 h-64 bg-gray-100 border p-4">
        <div class="flex flex-col mt-1">
          <div class="flex">
            <svg
              class="w-5 h-5 place-self-center mr-2"
              viewBox="0 0 27 27"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                opacity="0.2"
                d="M25.742 20.1195C25.5357 21.6615 24.7763 23.0761 23.6052 24.1002C22.434 25.1243 20.9308 25.6881 19.375 25.687C14.5845 25.687 9.99026 23.7839 6.60289 20.3966C3.21551 17.0092 1.3125 12.4149 1.3125 7.62445C1.31131 6.06869 1.8752 4.56545 2.89929 3.39428C3.92339 2.22312 5.33799 1.46376 6.88 1.25742C7.10795 1.23034 7.33854 1.27781 7.53726 1.39273C7.73597 1.50765 7.89213 1.68384 7.98235 1.89492L10.7887 8.16367C10.8576 8.32468 10.8857 8.50023 10.8704 8.67472C10.8551 8.8492 10.7969 9.01719 10.701 9.16375L7.86281 12.5385C7.76214 12.6904 7.7026 12.8659 7.69003 13.0477C7.67746 13.2295 7.71228 13.4115 7.7911 13.5758C8.88945 15.8243 11.2137 18.1206 13.4688 19.2084C13.634 19.2868 13.8168 19.3209 13.9992 19.3071C14.1816 19.2934 14.3572 19.2323 14.5088 19.13L17.8291 16.3011C17.9762 16.2032 18.1455 16.1435 18.3215 16.1275C18.4975 16.1115 18.6747 16.1397 18.8371 16.2095L25.1005 19.0158C25.3126 19.1054 25.4898 19.2615 25.6055 19.4605C25.7212 19.6596 25.7691 19.8908 25.742 20.1195Z"
                fill="#C0C0C0"
              />
              <path
                d="M16.2234 2.03731C16.2594 1.90247 16.3217 1.77605 16.4067 1.66529C16.4916 1.55453 16.5975 1.46158 16.7184 1.39178C16.8393 1.32197 16.9727 1.27666 17.1111 1.25844C17.2495 1.24022 17.3901 1.24944 17.5249 1.28559C19.4946 1.79951 21.2917 2.8292 22.7311 4.26861C24.1705 5.70802 25.2002 7.50512 25.7142 9.47481C25.7503 9.60963 25.7595 9.75025 25.7413 9.88864C25.7231 10.027 25.6778 10.1605 25.608 10.2813C25.5382 10.4022 25.4452 10.5081 25.3345 10.5931C25.2237 10.678 25.0973 10.7403 24.9624 10.7764C24.8727 10.7999 24.7803 10.812 24.6875 10.8122C24.4534 10.8122 24.2258 10.7349 24.0401 10.5922C23.8545 10.4496 23.7212 10.2496 23.6609 10.0233C23.2417 8.41539 22.4014 6.94833 21.2264 5.77336C20.0514 4.59838 18.5844 3.75801 16.9764 3.33887C16.8415 3.30295 16.7149 3.24077 16.604 3.15589C16.4931 3.07101 16.4 2.9651 16.3301 2.84421C16.2601 2.72333 16.2147 2.58984 16.1964 2.45138C16.1781 2.31293 16.1872 2.17222 16.2234 2.03731ZM15.9139 7.58887C17.7454 8.07762 18.9221 9.25434 19.4109 11.0858C19.4712 11.3121 19.6045 11.5121 19.7901 11.6547C19.9758 11.7974 20.2034 11.8747 20.4375 11.8747C20.5303 11.8745 20.6227 11.8624 20.7124 11.8389C20.8473 11.8028 20.9737 11.7405 21.0845 11.6556C21.1952 11.5706 21.2882 11.4647 21.358 11.3438C21.4278 11.223 21.4731 11.0895 21.4913 10.9511C21.5095 10.8128 21.5003 10.6721 21.4642 10.5373C20.7842 7.99262 19.0071 6.21559 16.4624 5.53559C16.3276 5.49957 16.187 5.49047 16.0487 5.50879C15.9103 5.5271 15.777 5.57249 15.6562 5.64236C15.5354 5.71222 15.4295 5.8052 15.3446 5.91597C15.2598 6.02675 15.1976 6.15315 15.1615 6.28797C15.1255 6.42279 15.1164 6.56339 15.1347 6.70173C15.153 6.84007 15.1984 6.97345 15.2683 7.09425C15.3382 7.21505 15.4311 7.3209 15.5419 7.40577C15.6527 7.49064 15.7791 7.55286 15.9139 7.58887ZM26.7966 20.2525C26.5598 22.0522 25.6759 23.7041 24.3102 24.8997C22.9445 26.0954 21.1902 26.753 19.375 26.7497C8.8297 26.7497 0.250012 18.17 0.250012 7.62473C0.246758 5.80957 0.904362 4.05529 2.1 2.68955C3.29564 1.3238 4.94755 0.439982 6.7472 0.203169C7.20229 0.147601 7.66314 0.240704 8.06096 0.468579C8.45879 0.696454 8.77224 1.04688 8.95454 1.46754L11.7595 7.72965V7.74559C11.8991 8.0676 11.9568 8.41916 11.9273 8.76888C11.8979 9.1186 11.7823 9.45558 11.5909 9.74973C11.567 9.78559 11.5417 9.81879 11.5152 9.852L8.75001 13.1298C9.74478 15.1512 11.8592 17.247 13.9071 18.2444L17.1398 15.4939C17.1715 15.4672 17.2048 15.4424 17.2394 15.4195C17.5333 15.2235 17.8714 15.1038 18.2232 15.0713C18.575 15.0389 18.9293 15.0946 19.2542 15.2336L19.2714 15.2415L25.5282 18.0452C25.9496 18.2269 26.3009 18.54 26.5295 18.9379C26.7582 19.3358 26.8518 19.797 26.7966 20.2525ZM24.6875 19.9869H24.6729L18.4307 17.1912L15.1967 19.9418C15.1654 19.9683 15.1325 19.9932 15.0984 20.0161C14.7927 20.2201 14.4392 20.3413 14.0725 20.3679C13.7059 20.3944 13.3386 20.3254 13.0067 20.1675C10.5191 18.9656 8.03946 16.5046 6.83618 14.0436C6.67685 13.714 6.60535 13.3489 6.62862 12.9835C6.65189 12.6182 6.76913 12.2651 6.969 11.9584C6.99152 11.9224 7.01684 11.8882 7.0447 11.8561L9.81251 8.57434L7.02345 2.33215C7.02293 2.32685 7.02293 2.32152 7.02345 2.31622C5.73551 2.48422 4.55297 3.11596 3.69731 4.09313C2.84164 5.0703 2.37153 6.32588 2.37501 7.62473C2.37993 12.1319 4.17258 16.4531 7.35963 19.6401C10.5467 22.8272 14.8678 24.6198 19.375 24.6247C20.6731 24.6292 21.9283 24.1607 22.906 23.3069C23.8838 22.4531 24.5171 21.2724 24.6875 19.9856V19.9869Z"
                fill="#1B426B"
              />
            </svg>
            <div class="font-bold text-lg text-[#1B426B]">
              고객상담실
            </div>
          </div>
          <div class="bg-[#1B426B] w-full h-[0.1rem]" />
          <div class="flex flex-col gap-3 mt-4">
            <div class="flex gap-3">
              <div class="w-[3.5rem] text-center px-3 bg-[#FF7070] text-white rounded-md text-sm">
                대표
              </div>
              <div class="font-bold text-[#1B426B]">
                031-527-9765~6
              </div>
            </div>
            <div class="flex gap-3">
              <div class="w-[3.5rem] text-center px-3 bg-[#2FCDFF] text-white rounded-md text-sm">
                HP
              </div>
              <div class="font-bold text-[#1B426B]">
                010-3787-2333
              </div>
            </div>
            <div class="flex gap-3">
              <div class="w-[3.5rem] text-center px-3 bg-[#7098FF] text-white rounded-md text-sm">
                서울
              </div>
              <div class="font-bold text-[#1B426B]">
                02-969-9765~6
              </div>
            </div>
            <div class="flex gap-3">
              <div class="w-[3.5rem] text-center px-3 bg-[#FFC700] text-white rounded-md text-sm">
                A/S
              </div>
              <div class="font-bold text-[#1B426B]">
                010-6667-8033
              </div>
            </div>
            <div class="text-[0.7rem] font-bold mt-3">
              제품에 대한 궁금한 사항을 문의해주세요.
            </div>
          </div>
        </div>
      </div>
      <div class="w-1/3 h-64 bg-white border p-4">
        <div class="flex flex-col mt-1">
          <div class="font-bold text-lg text-[#1B426B]">
            빠른 견적 상담 신청
          </div>
          <div class="bg-[#1B426B] w-full h-[0.1rem]" />
          <div class="flex flex-col mt-2 gap-2">
            <input
              class="w-full border bg-gray-50 p-1 px-3 placeholder:text-sm"
              placeholder="성함"
              disabled
              type="text"
            >
            <input
              class="w-full border bg-gray-50 p-1 px-3 placeholder:text-sm"
              placeholder="연락처(010-0000-0000)"
              type="text"
              disabled
            >
            <textarea
              class="w-full border bg-gray-50 p-1 px-3 placeholder:text-sm"
              placeholder="상담내용"
              type="text"
              disabled
            />
          </div>
          <NuxtLink
            to="/request/estimate"
            class="bg-[#1B426B] text-sm w-[8rem] p-1 text-center text-white font-bold mx-auto mt-3.5"
          >
            빠른견적상담하기
          </NuxtLink>
        </div>
      </div>
    </div>
  </div>
</template>
